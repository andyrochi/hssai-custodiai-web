import { reactive } from 'vue'
import { defineStore } from 'pinia'

export interface factorObj {
  factor: string | undefined
  description: string
}

export interface Factors {
  fatherFavorable: factorObj[]
  fatherUnfavorable: factorObj[]
  motherFavorable: factorObj[]
  motherUnfavorable: factorObj[]
}

export const useMode3OptionsTextStore = defineStore('mode3-options-text', () => {
  const allFactors: Factors = reactive({
    fatherFavorable: [],
    fatherUnfavorable: [],
    motherFavorable: [],
    motherUnfavorable: []
  })

  const mockResult = reactive({
    C1: {
      Applicant: {
        all_probs: [
          0.7515619397163391, 0.9469538927078247, 0.9308847188949585, 0.4010549783706665,
          0.35269466042518616, 0.9407139420509338, 0.2968755066394806, 0.7233595252037048,
          0.5067806243896484, 0.25992444157600403, 0.7597670555114746
        ],
        avg_prob: 62.4597430229187,
        max: 94.7,
        min: 25.99,
        q1: 37.69,
        q2: 72.34,
        q3: 84.53,
        std: 26.83
      },
      Both: {
        all_probs: [
          0.10788033902645111, 0.030577402561903, 0.013971208594739437, 0.15944845974445343,
          0.5337744355201721, 0.02033604308962822, 0.03482595831155777, 0.022840166464447975,
          0.025942884385585785, 0.09242471307516098, 0.12737341225147247
        ],
        avg_prob: 10.630864650011063,
        max: 53.38,
        min: 1.4,
        q1: 2.44,
        q2: 3.48,
        q3: 11.76,
        std: 15.05
      },
      Respondent: {
        all_probs: [
          0.14055770635604858, 0.02246874012053013, 0.05514407157897949, 0.43949654698371887,
          0.11353093385696411, 0.03894997760653496, 0.6682985424995422, 0.25380033254623413,
          0.46727651357650757, 0.6476508378982544, 0.11285949498414993
        ],
        avg_prob: 26.909396052360535,
        max: 66.83,
        min: 2.25,
        q1: 8.4,
        q2: 14.06,
        q3: 45.34,
        std: 24.41
      }
    },
    C2: {
      Applicant: {
        all_probs: [
          0.006647189147770405, 0.006647189147770405, 0.006647189147770405, 0.006647189147770405,
          0.006647189147770405, 0.006647189147770405, 0.006647189147770405, 0.006647189147770405,
          0.006647189147770405, 0.006647189147770405, 0.00248204474337399, 0.1322496086359024,
          0.0056416913866996765, 0.0014386927941814065, 0.14020799100399017, 0.12587568163871765,
          0.001954838400706649, 0.02804464101791382, 0.11548486351966858, 0.16578145325183868,
          0.004630050156265497, 0.004630050156265497, 0.004630050156265497, 0.004630050156265497,
          0.004630050156265497, 0.004630050156265497, 0.004630050156265497, 0.004630050156265497,
          0.004630050156265497, 0.004630050156265497, 0.010358692146837711, 0.023369641974568367,
          0.01971033588051796, 0.0037562514189630747, 0.007775566540658474, 0.01106469426304102,
          0.006718198303133249, 0.0069430372677743435, 0.0030420429538935423, 0.05677760764956474,
          0.16904142498970032, 0.16904142498970032, 0.16904142498970032, 0.16904142498970032,
          0.16904142498970032, 0.16904142498970032, 0.16904142498970032, 0.16904142498970032,
          0.16904142498970032, 0.16904142498970032, 0.3424619436264038, 0.24644842743873596,
          0.24732425808906555, 0.16049210727214813, 0.1510246843099594, 0.337831050157547,
          0.19350208342075348, 0.39870792627334595, 0.2671389579772949, 0.2603382468223572,
          0.002093574730679393, 0.002093574730679393, 0.002093574730679393, 0.002093574730679393,
          0.002093574730679393, 0.002093574730679393, 0.002093574730679393, 0.002093574730679393,
          0.002093574730679393, 0.002093574730679393, 0.004657911602407694, 0.006020091008394957,
          0.007267906330525875, 0.005269333720207214, 0.007087907288223505, 0.010193601250648499,
          0.002126323990523815, 0.006448117084801197, 0.0026322652120143175, 0.005014071706682444,
          0.8897820711135864, 0.8897820711135864, 0.8897820711135864, 0.8897820711135864,
          0.8897820711135864, 0.8897820711135864, 0.8897820711135864, 0.8897820711135864,
          0.8897820711135864, 0.8897820711135864, 0.8417145609855652, 0.8642607927322388,
          0.9171031713485718, 0.8625303506851196, 0.7673904299736023, 0.8633456230163574,
          0.8569654226303101, 0.8770722150802612, 0.9097795486450195, 0.9260684847831726,
          0.010529466904699802, 0.010529466904699802, 0.010529466904699802, 0.010529466904699802,
          0.010529466904699802, 0.010529466904699802, 0.010529466904699802, 0.010529466904699802,
          0.010529466904699802, 0.010529466904699802, 0.002561102854087949, 0.10744613409042358,
          0.00393863907083869, 0.2643055319786072, 0.0712352842092514, 0.0014608012279495597,
          0.006878992542624474, 0.023522553965449333, 0.007853696122765541, 0.013428570702672005
        ],
        avg_prob: 19.622303722038247,
        max: 92.61,
        min: 0.14,
        q1: 0.47,
        q2: 1.05,
        q3: 16.9,
        std: 31.85
      },
      Both: {
        all_probs: [
          0.31553447246551514, 0.31553447246551514, 0.31553447246551514, 0.31553447246551514,
          0.31553447246551514, 0.31553447246551514, 0.31553447246551514, 0.31553447246551514,
          0.31553447246551514, 0.31553447246551514, 0.04818420857191086, 0.07325567305088043,
          0.01962505839765072, 0.02870188280940056, 0.06584259122610092, 0.03143293783068657,
          0.06246582418680191, 0.052754394710063934, 0.04946311563253403, 0.024619385600090027,
          0.7643299698829651, 0.7643299698829651, 0.7643299698829651, 0.7643299698829651,
          0.7643299698829651, 0.7643299698829651, 0.7643299698829651, 0.7643299698829651,
          0.7643299698829651, 0.7643299698829651, 0.835886538028717, 0.7238028645515442,
          0.929427444934845, 0.9430301785469055, 0.7756147384643555, 0.8371630907058716,
          0.9754368662834167, 0.8734671473503113, 0.9147961735725403, 0.9086811542510986,
          0.42452359199523926, 0.42452359199523926, 0.42452359199523926, 0.42452359199523926,
          0.42452359199523926, 0.42452359199523926, 0.42452359199523926, 0.42452359199523926,
          0.42452359199523926, 0.42452359199523926, 0.33945274353027344, 0.5092217922210693,
          0.5054104328155518, 0.4483887255191803, 0.3839925527572632, 0.3828125298023224,
          0.40043142437934875, 0.3308241367340088, 0.5003489255905151, 0.4450291097164154,
          0.0503498800098896, 0.0503498800098896, 0.0503498800098896, 0.0503498800098896,
          0.0503498800098896, 0.0503498800098896, 0.0503498800098896, 0.0503498800098896,
          0.0503498800098896, 0.0503498800098896, 0.10389693081378937, 0.11019451916217804,
          0.09878520667552948, 0.06533665955066681, 0.08811691403388977, 0.15626521408557892,
          0.06630869209766388, 0.08636440336704254, 0.05537097901105881, 0.10044874250888824,
          0.08716858923435211, 0.08716858923435211, 0.08716858923435211, 0.08716858923435211,
          0.08716858923435211, 0.08716858923435211, 0.08716858923435211, 0.08716858923435211,
          0.08716858923435211, 0.08716858923435211, 0.0864872857928276, 0.10231276601552963,
          0.062050871551036835, 0.06632973253726959, 0.17135801911354065, 0.10154406726360321,
          0.10850771516561508, 0.09275760501623154, 0.07105427980422974, 0.05778385326266289,
          0.4197535216808319, 0.4197535216808319, 0.4197535216808319, 0.4197535216808319,
          0.4197535216808319, 0.4197535216808319, 0.4197535216808319, 0.4197535216808319,
          0.4197535216808319, 0.4197535216808319, 0.1693095564842224, 0.8747117519378662,
          0.16283918917179108, 0.7255082726478577, 0.2782171666622162, 0.10650937259197235,
          0.2218281477689743, 0.7772236466407776, 0.31268686056137085, 0.13345113396644592
        ],
        avg_prob: 33.04143620810161,
        max: 97.54,
        min: 1.96,
        q1: 8.72,
        q2: 31.55,
        q3: 42.45,
        std: 27.98
      },
      Respondent: {
        all_probs: [
          0.6778183579444885, 0.6778183579444885, 0.6778183579444885, 0.6778183579444885,
          0.6778183579444885, 0.6778183579444885, 0.6778183579444885, 0.6778183579444885,
          0.6778183579444885, 0.6778183579444885, 0.9493337273597717, 0.7944946885108948,
          0.9747332334518433, 0.9698594212532043, 0.7939493656158447, 0.8426913619041443,
          0.9355792999267578, 0.9192010164260864, 0.8350520730018616, 0.8095991611480713,
          0.23103997111320496, 0.23103997111320496, 0.23103997111320496, 0.23103997111320496,
          0.23103997111320496, 0.23103997111320496, 0.23103997111320496, 0.23103997111320496,
          0.23103997111320496, 0.23103997111320496, 0.15375474095344543, 0.2528274357318878,
          0.05086217075586319, 0.05321361497044563, 0.2166096568107605, 0.15177221596240997,
          0.01784495823085308, 0.11958979815244675, 0.08216173201799393, 0.03454127162694931,
          0.4064350724220276, 0.4064350724220276, 0.4064350724220276, 0.4064350724220276,
          0.4064350724220276, 0.4064350724220276, 0.4064350724220276, 0.4064350724220276,
          0.4064350724220276, 0.4064350724220276, 0.31808531284332275, 0.2443297952413559,
          0.24726533889770508, 0.3911191523075104, 0.4649827480316162, 0.279356449842453,
          0.4060664176940918, 0.27046799659729004, 0.23251217603683472, 0.2946327328681946,
          0.9475564956665039, 0.9475564956665039, 0.9475564956665039, 0.9475564956665039,
          0.9475564956665039, 0.9475564956665039, 0.9475564956665039, 0.9475564956665039,
          0.9475564956665039, 0.9475564956665039, 0.8914452195167542, 0.8837853670120239,
          0.8939468860626221, 0.929394006729126, 0.904795229434967, 0.833541214466095,
          0.9315650463104248, 0.9071874618530273, 0.9419967532157898, 0.8945371508598328,
          0.023049434646964073, 0.023049434646964073, 0.023049434646964073, 0.023049434646964073,
          0.023049434646964073, 0.023049434646964073, 0.023049434646964073, 0.023049434646964073,
          0.023049434646964073, 0.023049434646964073, 0.07179810106754303, 0.03342638164758682,
          0.02084597572684288, 0.07113993167877197, 0.061251554638147354, 0.03511029854416847,
          0.03452696651220322, 0.030170196667313576, 0.019166091457009315, 0.016147654503583908,
          0.5697170495986938, 0.5697170495986938, 0.5697170495986938, 0.5697170495986938,
          0.5697170495986938, 0.5697170495986938, 0.5697170495986938, 0.5697170495986938,
          0.5697170495986938, 0.5697170495986938, 0.8281292915344238, 0.017842218279838562,
          0.8332221508026123, 0.010186228901147842, 0.6505475044250488, 0.8920297622680664,
          0.7712928652763367, 0.1992538422346115, 0.6794594526290894, 0.8531202673912048
        ],
        avg_prob: 47.336261624780796,
        max: 97.47,
        min: 1.02,
        q1: 18.79,
        q2: 40.64,
        q3: 82.94,
        std: 34.01
      }
    }
  })
  function addNewFactor(factorType: keyof Factors) {
    allFactors[factorType].push({
      factor: undefined,
      description: ''
    })
  }

  function $reset() {
    allFactors.fatherFavorable = []
    allFactors.fatherUnfavorable = []
    allFactors.motherFavorable = []
    allFactors.motherUnfavorable = []
  }

  return { allFactors, addNewFactor, $reset, mockResult }
})
